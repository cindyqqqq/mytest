import streamlit as st
import pandas as pd
import numpy as np
st.title("å—å®ç¾é£Ÿæ¢")
st.markdown('æ¢ç´¢å—å®åœ°é“ç¾é£Ÿåº—é“ºï¼Œè®©ä½ çš„å‘³è•¾ä½“éªŒå¹¿è¥¿é£å‘³')
shops = pd.DataFrame({
    "åº—é“ºåç§°": ["æ¡‚å°å¨(ä¸‡è±¡åŸåº—)", "å—å®è‚¥ä»”é¥­åº—(æœé˜³åº—)", "ç”˜å®¶ç•ŒæŸ æª¬é¸­(å¤§å­¦è·¯åº—)", "å¤è®°è€å‹ç²‰(ä¸­å±±è·¯åº—)", "ç²‰ä¹‹éƒ½(æ˜Ÿå…‰åº—)"],
    "è¯„åˆ†": [4.8, 4.6, 4.7, 4.5, 4.4],
    "åœ°å€": ["é’ç§€åŒºæ°‘æ—å¤§é“136å·", "å…´å®åŒºæœé˜³è·¯65å·", "è¥¿ä¹¡å¡˜åŒºå¤§å­¦ä¸œè·¯100å·", "é’ç§€åŒºä¸­å±±è·¯22å·", "æ±Ÿå—åŒºæ˜Ÿå…‰å¤§é“34å·"],
    "åæ ‡": [(22.8170, 108.3668), (22.8285, 108.3428), (22.8060, 108.2745), (22.8150, 108.3400), (22.8020, 108.3450)]
})

# 2. é¤å…è¯„åˆ†æŸ±çŠ¶å›¾æ•°æ®
score_data = shops[["åº—é“ºåç§°", "è¯„åˆ†"]].set_index("åº—é“ºåç§°")

# 3. ä¸åŒç±»å‹é¤å…ä»·æ ¼ï¼ˆæŠ˜çº¿å›¾æ•°æ®ï¼‰
price_type_data = pd.DataFrame({
    "ç±»å‹": ["è€å‹ç²‰åº—", "æŸ æª¬é¸­åº—", "å¹¿è¥¿èœé¤å…", "ç²‰é¢é¦†", "å¤§æ’æ¡£"],
    "äººå‡ä»·æ ¼(å…ƒ)": [18, 85, 68, 15, 55]
}).set_index("ç±»å‹")

# 4. ç”¨é¤é«˜å³°æ—¶æ®µï¼ˆé¢ç§¯å›¾æ•°æ®ï¼‰
time_data = pd.DataFrame({
    "æ—¶æ®µ": ["08:00", "10:00", "12:00", "14:00", "18:00", "20:00", "22:00"],
    "æœ¬åœ°é£Ÿå®¢": [60, 90, 220, 70, 260, 190, 110],
    "å¤–åœ°æ¸¸å®¢": [40, 70, 180, 50, 220, 160, 90]
}).set_index("æ—¶æ®µ")

# 5. 5å®¶é¤å…12ä¸ªæœˆä»·æ ¼èµ°åŠ¿ï¼ˆå¤šæŠ˜çº¿å›¾ï¼‰
months = [f"{m}æœˆ" for m in range(1, 13)]
price_trend_data = pd.DataFrame({
    "æœˆä»½": months,
    shops["åº—é“ºåç§°"][0]: np.linspace(65, 72, 12) + np.random.randn(12)*0.8,
    shops["åº—é“ºåç§°"][1]: np.linspace(58, 65, 12) + np.random.randn(12)*0.8,
    shops["åº—é“ºåç§°"][2]: np.linspace(75, 82, 12) + np.random.randn(12)*0.8,
    shops["åº—é“ºåç§°"][3]: np.linspace(15, 18, 12) + np.random.randn(12)*0.3,
    shops["åº—é“ºåç§°"][4]: np.linspace(12, 15, 12) + np.random.randn(12)*0.3
}).set_index("æœˆä»½")

# 1. å—å®ç¾é£Ÿåœ°å›¾
st.subheader("ğŸ“ å—å®ç¾é£Ÿåœ°å›¾")
map_data = pd.DataFrame(
    [list(coord) for coord in shops["åæ ‡"]],
    columns=["lat", "lon"],
    index=shops["åº—é“ºåç§°"]
)
st.map(map_data, zoom=12)

# 2. é¤å…è¯„åˆ†æŸ±çŠ¶å›¾
st.subheader("â­ é¤å…è¯„åˆ†")
st.bar_chart(score_data, color="#1E88E5")

# 3. ä¸åŒç±»å‹é¤å…ä»·æ ¼æŠ˜çº¿å›¾
st.subheader("ğŸ’° ä¸åŒç±»å‹é¤å…ä»·æ ¼")
st.line_chart(price_type_data, color="#2196F3")

# 4. ç”¨é¤é«˜å³°æ—¶æ®µé¢ç§¯å›¾
st.subheader("â° ç”¨é¤é«˜å³°æ—¶æ®µ")
st.area_chart(time_data, color=["#1E88E5", "#E53935"])

# 5. 5å®¶é¤å…12ä¸ªæœˆä»·æ ¼èµ°åŠ¿ï¼ˆæ–°å¢å¤šæŠ˜çº¿å›¾ï¼‰
st.subheader("ğŸ“ˆ é¤å…12ä¸ªæœˆä»·æ ¼èµ°åŠ¿")
st.line_chart(price_trend_data)
